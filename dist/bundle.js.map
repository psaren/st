{"version":3,"sources":["node_modules/_browser-pack@6.1.0@browser-pack/_prelude.js","src/data.ts","src/main.ts"],"names":[],"mappings":"AAAA;;;;ACMA,IAAM,UAAU,SAAV,OAAU,CAAC,GAAD,EAAY;AAC1B,QAAM,OAAe,EAArB;AAEA,SAAI,IAAI,IAAI,CAAZ,EAAc,IAAI,GAAlB,EAAsB,GAAtB,EAA2B;AACzB,aAAK,IAAL,CAAU;AACR,gBAAI,IAAI,CADA;AAER,mBAAO,cAAW,IAAI,CAAf,CAFC;AAGR,kBAAM,aAAU,IAAI,CAAd,CAHE;AAIR,sBAAU,iBAAc,IAAI,CAAlB;AAJF,SAAV;AAMD;AACD,WAAO,IAAP;AACD,CAZD;AAaA,IAAM,OAAe,QAAQ,GAAR,CAArB;AAGE,QAAA,IAAA,GAAA,IAAA;;;;;;ACrBF,IAAA,SAAA,QAAA,QAAA,CAAA;AAEA,IAAA,KAAA,aAAA,YAAA;AAOE,aAAA,EAAA,CAAY,EAAZ,EAAwB,SAAxB,EAA0C;AACxC,aAAK,EAAL,GAAU,EAAV;AACA,aAAK,EAAL,GAAU,SAAS,cAAT,CAAwB,KAAK,EAA7B,CAAV;AACA,aAAK,SAAL,GAAiB,aAAa,EAA9B;AACD;AAED,OAAA,SAAA,CAAA,IAAA,GAAA,YAAA;AACE,aAAK,kBAAL;AACA,YAAM,MAAc,KAAK,gBAAL,EAApB;AACA,aAAK,WAAL,CAAiB,OAAA,IAAA,CAAK,KAAL,CAAW,CAAX,EAAc,MAAM,CAApB,CAAjB;AACA,aAAK,QAAL;AACD,KALD;AAOA,OAAA,SAAA,CAAA,WAAA,GAAA,UAAY,SAAZ,EAA6B;AAA7B,YAAA,UAAA,IAAA;AACE,YAAI,OAAc,EAAlB;AACA,kBAAU,OAAV,CAAkB,UAAA,IAAA,EAAI;AACpB,oBAAQ,QAAK,WAAL,CAAiB,IAAjB,CAAR;AACD,SAFD;AAGA,aAAK,IAAL,CAAU,aAAV,CAAwB,kBAAxB,EAA4C,SAA5C,GAAwD,IAAxD;AACD,KAND;AAQA,OAAA,SAAA,CAAA,WAAA,GAAA,UAAY,IAAZ,EAAqB;AACnB,eAAO,4DACoB,KAAK,EADzB,GAC2B,yCAD3B,GAEoB,KAAK,IAFzB,GAE6B,yCAF7B,GAGoB,KAAK,KAHzB,GAG8B,yCAH9B,GAIoB,KAAK,QAJzB,GAIiC,kBAJxC;AAMD,KAPD;AASA,OAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACE,YAAM,QAAQ,IAAd;AACA,aAAK,EAAL,CAAQ,gBAAR,CAAyB,QAAzB,EAAmC,UAAS,CAAT,EAAe;AAChD,gBAAM,aAAa,EAAE,MAAF,CAAS,SAA5B;AACA,gBAAM,WAAwB,MAAM,IAAN,CAAW,aAAX,CAAyB,kBAAzB,CAA9B;AACA,qBAAS,KAAT,CAAe,GAAf,GAAqB,aAAa,IAAlC;AACA,gBAAM,QAAgB,MAAM,cAAN,CAAqB,UAArB,CAAtB;AACA,kBAAM,WAAN,CAAkB,KAAlB;AACD,SAND;AAOD,KATD;AAWA,OAAA,SAAA,CAAA,UAAA,GAAA,UAAW,GAAX,EAAwB,GAAxB,EAA2C;AAAnB,YAAA,QAAA,KAAA,CAAA,EAAA;AAAA,kBAAA,KAAA;AAAmB;AACzC,YAAM,MAAmB,SAAS,aAAT,CAAuB,GAAvB,CAAzB;AACA,YAAG,QAAQ,EAAX,EAAe;AACb,gBAAI,SAAJ,GAAgB,GAAhB;AACD;AACD,eAAO,GAAP;AACD,KAND;AAQA,OAAA,SAAA,CAAA,kBAAA,GAAA,YAAA;AACE,YAAM,QAAqB,KAAK,UAAL,CAAgB,SAAhB,CAA3B;AACA,YAAM,WAAwB,KAAK,UAAL,CAAgB,iBAAhB,CAA9B;AAEA,YAAM,WAAW,SAAS,sBAAT,EAAjB;AAEA,cAAM,KAAN,CAAY,MAAZ,GAAqB,OAAA,IAAA,CAAK,MAAL,GAAc,EAAd,GAAmB,IAAxC;AACA,iBAAS,WAAT,CAAqB,QAArB;AACA,cAAM,WAAN,CAAkB,QAAlB;AACA,aAAK,EAAL,CAAQ,WAAR,CAAoB,KAApB;AACA,aAAK,IAAL,GAAY,KAAK,EAAL,CAAQ,aAAR,CAAsB,UAAtB,CAAZ;AACA,aAAK,SAAL,GAAiB,KAAK,IAAL,CAAU,aAAV,CAAwB,iBAAxB,CAAjB;AACD,KAZD;AAcA,OAAA,SAAA,CAAA,gBAAA,GAAA,YAAA;AACE,eAAO,KAAK,IAAL,CAAU,KAAK,EAAL,CAAQ,YAAR,GAAuB,KAAK,SAAtC,CAAP;AACD,KAFD;AAIA,OAAA,SAAA,CAAA,cAAA,GAAA,UAAe,SAAf,EAAgC;AAC9B,gBAAQ,GAAR,CAAY,SAAZ;AACA,YAAI,QAAgB,KAAK,KAAL,CAAW,YAAY,KAAK,SAA5B,CAApB;AACA,YAAI,MAAa,KAAK,GAAL,CAAS,QAAQ,KAAK,gBAAL,EAAR,GAAkC,CAA3C,EAA8C,OAAA,IAAA,CAAK,MAAnD,CAAjB;AACA,YAAM,QAAgB,OAAA,IAAA,CAAK,KAAL,CAAW,KAAX,EAAkB,GAAlB,CAAtB;AACA,eAAO,KAAP;AACD,KAND;AAQF,WAAA,EAAA;AAAC,CAlFD,EAAA;AAoFA,IAAM,KAAK,IAAI,EAAJ,CAAO,OAAP,CAAX;AAEA,GAAG,IAAH","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","interface Item {\r\n  id: number,\r\n  label: string,\r\n  name: string,\r\n  position: string,\r\n}\r\nconst getData = (num: number) => {\r\n  const data: Item[] = []\r\n\r\n  for(let i = 0;i < num;i++) {\r\n    data.push({\r\n      id: i + 1,\r\n      label: `label - ${i + 1}`,\r\n      name: `name - ${i + 1}`,\r\n      position: `position - ${i + 1}`,\r\n    })\r\n  }\r\n  return data\r\n}\r\nconst data: Item[] = getData(100);\r\nexport {\r\n  Item, \r\n  data\r\n}","import { sayHello } from './greet';\r\nimport {data, Item} from './data'\r\n\r\nclass ST {\r\n\r\n  id: string;\r\n  el: any;\r\n  body: HTMLElement;\r\n  topHolder: HTMLElement;\r\n  rowHeight: number;\r\n  constructor(id: string, rowHeight?: number) {\r\n    this.id = id\r\n    this.el = document.getElementById(this.id)\r\n    this.rowHeight = rowHeight || 34;\r\n  }\r\n\r\n  init():void {\r\n    this.setContainerHeight()\r\n    const num: number = this.visibleDataCount()\r\n    this.renderTable(data.slice(0, num + 5))\r\n    this.onScroll()\r\n  }\r\n\r\n  renderTable(tableData: Item[]):void {\r\n    let html:string = ''\r\n    tableData.forEach(item => {\r\n      html += this.getTemplate(item)\r\n    })\r\n    this.body.querySelector('.st-body-content').innerHTML = html\r\n  }\r\n\r\n  getTemplate(item: any): string {\r\n    return `<div class=\"tb-row\">\r\n    <div class=\"tb-row-item\">${item.id}</div>\r\n    <div class=\"tb-row-item\">${item.name}</div>\r\n    <div class=\"tb-row-item\">${item.label}</div>\r\n    <div class=\"tb-row-item\">${item.position}</div>\r\n  </div>`\r\n  }\r\n\r\n  onScroll():void {\r\n    const _this = this\r\n    this.el.addEventListener('scroll', function(e: any) {\r\n      const _scrollTop = e.target.scrollTop\r\n      const _content: HTMLElement = _this.body.querySelector('.st-body-content')\r\n      _content.style.top = _scrollTop + 'px'\r\n      const _data: Item[] = _this.getVisibleData(_scrollTop)\r\n      _this.renderTable(_data)\r\n    })\r\n  }\r\n\r\n  getElement(cls: string, tag: string = 'div') {\r\n    const _el: HTMLElement = document.createElement(tag)\r\n    if(cls !== '') {\r\n      _el.className = cls\r\n    }\r\n    return _el\r\n  }\r\n\r\n  setContainerHeight() {\r\n    const _body: HTMLElement = this.getElement('st-body')\r\n    const _content: HTMLElement = this.getElement('st-body-content')\r\n    \r\n    const fragment = document.createDocumentFragment()\r\n\r\n    _body.style.height = data.length * 34 + 'px'\r\n    fragment.appendChild(_content)\r\n    _body.appendChild(fragment)\r\n    this.el.appendChild(_body) \r\n    this.body = this.el.querySelector('.st-body')\r\n    this.topHolder = this.body.querySelector('.st-body-holder')\r\n  }\r\n\r\n  visibleDataCount():number {\r\n    return Math.ceil(this.el.offsetHeight / this.rowHeight)\r\n  }\r\n\r\n  getVisibleData(scrollTop: number) {\r\n    console.log(scrollTop)\r\n    let start: number = Math.floor(scrollTop / this.rowHeight)\r\n    let end:number = Math.min(start + this.visibleDataCount() + 5, data.length)\r\n    const _data: Item[] = data.slice(start, end)\r\n    return _data\r\n  }\r\n\r\n}\r\n\r\nconst st = new ST('table')\r\n\r\nst.init()"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9fYnJvd3Nlci1wYWNrQDYuMS4wQGJyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInNyYy9kYXRhLnRzIiwic3JjL21haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUNNQSxJQUFNLFVBQVUsU0FBVixPQUFVLENBQUMsR0FBRCxFQUFZO0FBQzFCLFFBQU0sT0FBZSxFQUFyQjtBQUVBLFNBQUksSUFBSSxJQUFJLENBQVosRUFBYyxJQUFJLEdBQWxCLEVBQXNCLEdBQXRCLEVBQTJCO0FBQ3pCLGFBQUssSUFBTCxDQUFVO0FBQ1IsZ0JBQUksSUFBSSxDQURBO0FBRVIsbUJBQU8sY0FBVyxJQUFJLENBQWYsQ0FGQztBQUdSLGtCQUFNLGFBQVUsSUFBSSxDQUFkLENBSEU7QUFJUixzQkFBVSxpQkFBYyxJQUFJLENBQWxCO0FBSkYsU0FBVjtBQU1EO0FBQ0QsV0FBTyxJQUFQO0FBQ0QsQ0FaRDtBQWFBLElBQU0sT0FBZSxRQUFRLEdBQVIsQ0FBckI7QUFHRSxRQUFBLElBQUEsR0FBQSxJQUFBOzs7Ozs7QUNyQkYsSUFBQSxTQUFBLFFBQUEsUUFBQSxDQUFBO0FBRUEsSUFBQSxLQUFBLGFBQUEsWUFBQTtBQU9FLGFBQUEsRUFBQSxDQUFZLEVBQVosRUFBd0IsU0FBeEIsRUFBMEM7QUFDeEMsYUFBSyxFQUFMLEdBQVUsRUFBVjtBQUNBLGFBQUssRUFBTCxHQUFVLFNBQVMsY0FBVCxDQUF3QixLQUFLLEVBQTdCLENBQVY7QUFDQSxhQUFLLFNBQUwsR0FBaUIsYUFBYSxFQUE5QjtBQUNEO0FBRUQsT0FBQSxTQUFBLENBQUEsSUFBQSxHQUFBLFlBQUE7QUFDRSxhQUFLLGtCQUFMO0FBQ0EsWUFBTSxNQUFjLEtBQUssZ0JBQUwsRUFBcEI7QUFDQSxhQUFLLFdBQUwsQ0FBaUIsT0FBQSxJQUFBLENBQUssS0FBTCxDQUFXLENBQVgsRUFBYyxNQUFNLENBQXBCLENBQWpCO0FBQ0EsYUFBSyxRQUFMO0FBQ0QsS0FMRDtBQU9BLE9B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QUFNLFFBQWdCLE9BQUEsSUFBQSxDQUFLLEtBQUwsQ0FBVyxLQUFYLEVBQWtCLEdBQWxCLENBQXRCO0FBQ0EsZUFBTyxLQUFQO0FBQ0QsS0FORDtBQVFGLFdBQUEsRUFBQTtBQUFDLENBbEZELEVBQUE7QUFvRkEsSUFBTSxLQUFLLElBQUksRUFBSixDQUFPLE9BQVAsQ0FBWDtBQUVBLEdBQUcsSUFBSCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImludGVyZmFjZSBJdGVtIHtcclxuICBpZDogbnVtYmVyLFxyXG4gIGxhYmVsOiBzdHJpbmcsXHJcbiAgbmFtZTogc3RyaW5nLFxyXG4gIHBvc2l0aW9uOiBzdHJpbmcsXHJcbn1cclxuY29uc3QgZ2V0RGF0YSA9IChudW06IG51bWJlcikgPT4ge1xyXG4gIGNvbnN0IGRhdGE6IEl0ZW1bXSA9IFtdXHJcblxyXG4gIGZvcihsZXQgaSA9IDA7aSA8IG51bTtpKyspIHtcclxuICAgIGRhdGEucHVzaCh7XHJcbiAgICAgIGlkOiBpICsgMSxcclxuICAgICAgbGFiZWw6IGBsYWJlbCAtICR7aSArIDF9YCxcclxuICAgICAgbmFtZTogYG5hbWUgLSAke2kgKyAxfWAsXHJcbiAgICAgIHBvc2l0aW9uOiBgcG9zaXRpb24gLSAke2kgKyAxfWAsXHJcbiAgICB9KVxyXG4gIH1cclxuICByZXR1cm4gZGF0YVxyXG59XHJcbmNvbnN0IGRhdGE6IEl0ZW1bXSA9IGdldERhdGEoMTAwKTtcclxuZXhwb3J0IHtcclxuICBJdGVtLCBcclxuICBkYXRhXHJcbn0iLCJpbXBvcnQgeyBzYXlIZWxsbyB9IGZyb20gJy4vZ3JlZXQnO1xyXG5pbXBvcnQge2RhdGEsIEl0ZW19IGZyb20gJy4vZGF0YSdcclxuXHJcbmNsYXNzIFNUIHtcclxuXHJcbiAgaWQ6IHN0cmluZztcclxuICBlbDogYW55O1xyXG4gIGJvZHk6IEhUTUxFbGVtZW50O1xyXG4gIHRvcEhvbGRlcjogSFRNTEVsZW1lbnQ7XHJcbiAgcm93SGVpZ2h0OiBudW1iZXI7XHJcbiAgY29uc3RydWN0b3IoaWQ6IHN0cmluZywgcm93SGVpZ2h0PzogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmlkID0gaWRcclxuICAgIHRoaXMuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlkKVxyXG4gICAgdGhpcy5yb3dIZWlnaHQgPSByb3dIZWlnaHQgfHwgMzQ7XHJcbiAgfVxyXG5cclxuICBpbml0KCk6dm9pZCB7XHJcbiAgICB0aGlzLnNldENvbnRhaW5lckhlaWdodCgpXHJcbiAgICBjb25zdCBudW06IG51bWJlciA9IHRoaXMudmlzaWJsZURhdGFDb3VudCgpXHJcbiAgICB0aGlzLnJlbmRlclRhYmxlKGRhdGEuc2xpY2UoMCwgbnVtICsgNSkpXHJcbiAgICB0aGlzLm9uU2Nyb2xsKClcclxuICB9XHJcblxyXG4gIHJlbmRlclRhYmxlKHRhYmxlRGF0YTogSXRlbVtdKTp2b2lkIHtcclxuICAgIGxldCBodG1sOnN0cmluZyA9ICcnXHJcbiAgICB0YWJsZURhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgaHRtbCArPSB0aGlzLmdldFRlbXBsYXRlKGl0ZW0pXHJcbiAgICB9KVxyXG4gICAgdGhpcy5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5zdC1ib2R5LWNvbnRlbnQnKS5pbm5lckhUTUwgPSBodG1sXHJcbiAgfVxyXG5cclxuICBnZXRUZW1wbGF0ZShpdGVtOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwidGItcm93XCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwidGItcm93LWl0ZW1cIj4ke2l0ZW0uaWR9PC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzPVwidGItcm93LWl0ZW1cIj4ke2l0ZW0ubmFtZX08L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJ0Yi1yb3ctaXRlbVwiPiR7aXRlbS5sYWJlbH08L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJ0Yi1yb3ctaXRlbVwiPiR7aXRlbS5wb3NpdGlvbn08L2Rpdj5cclxuICA8L2Rpdj5gXHJcbiAgfVxyXG5cclxuICBvblNjcm9sbCgpOnZvaWQge1xyXG4gICAgY29uc3QgX3RoaXMgPSB0aGlzXHJcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uKGU6IGFueSkge1xyXG4gICAgICBjb25zdCBfc2Nyb2xsVG9wID0gZS50YXJnZXQuc2Nyb2xsVG9wXHJcbiAgICAgIGNvbnN0IF9jb250ZW50OiBIVE1MRWxlbWVudCA9IF90aGlzLmJvZHkucXVlcnlTZWxlY3RvcignLnN0LWJvZHktY29udGVudCcpXHJcbiAgICAgIF9jb250ZW50LnN0eWxlLnRvcCA9IF9zY3JvbGxUb3AgKyAncHgnXHJcbiAgICAgIGNvbnN0IF9kYXRhOiBJdGVtW10gPSBfdGhpcy5nZXRWaXNpYmxlRGF0YShfc2Nyb2xsVG9wKVxyXG4gICAgICBfdGhpcy5yZW5kZXJUYWJsZShfZGF0YSlcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBnZXRFbGVtZW50KGNsczogc3RyaW5nLCB0YWc6IHN0cmluZyA9ICdkaXYnKSB7XHJcbiAgICBjb25zdCBfZWw6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpXHJcbiAgICBpZihjbHMgIT09ICcnKSB7XHJcbiAgICAgIF9lbC5jbGFzc05hbWUgPSBjbHNcclxuICAgIH1cclxuICAgIHJldHVybiBfZWxcclxuICB9XHJcblxyXG4gIHNldENvbnRhaW5lckhlaWdodCgpIHtcclxuICAgIGNvbnN0IF9ib2R5OiBIVE1MRWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudCgnc3QtYm9keScpXHJcbiAgICBjb25zdCBfY29udGVudDogSFRNTEVsZW1lbnQgPSB0aGlzLmdldEVsZW1lbnQoJ3N0LWJvZHktY29udGVudCcpXHJcbiAgICBcclxuICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXHJcblxyXG4gICAgX2JvZHkuc3R5bGUuaGVpZ2h0ID0gZGF0YS5sZW5ndGggKiAzNCArICdweCdcclxuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKF9jb250ZW50KVxyXG4gICAgX2JvZHkuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpXHJcbiAgICB0aGlzLmVsLmFwcGVuZENoaWxkKF9ib2R5KSBcclxuICAgIHRoaXMuYm9keSA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnN0LWJvZHknKVxyXG4gICAgdGhpcy50b3BIb2xkZXIgPSB0aGlzLmJvZHkucXVlcnlTZWxlY3RvcignLnN0LWJvZHktaG9sZGVyJylcclxuICB9XHJcblxyXG4gIHZpc2libGVEYXRhQ291bnQoKTpudW1iZXIge1xyXG4gICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmVsLm9mZnNldEhlaWdodCAvIHRoaXMucm93SGVpZ2h0KVxyXG4gIH1cclxuXHJcbiAgZ2V0VmlzaWJsZURhdGEoc2Nyb2xsVG9wOiBudW1iZXIpIHtcclxuICAgIGNvbnNvbGUubG9nKHNjcm9sbFRvcClcclxuICAgIGxldCBzdGFydDogbnVtYmVyID0gTWF0aC5mbG9vcihzY3JvbGxUb3AgLyB0aGlzLnJvd0hlaWdodClcclxuICAgIGxldCBlbmQ6bnVtYmVyID0gTWF0aC5taW4oc3RhcnQgKyB0aGlzLnZpc2libGVEYXRhQ291bnQoKSArIDUsIGRhdGEubGVuZ3RoKVxyXG4gICAgY29uc3QgX2RhdGE6IEl0ZW1bXSA9IGRhdGEuc2xpY2Uoc3RhcnQsIGVuZClcclxuICAgIHJldHVybiBfZGF0YVxyXG4gIH1cclxuXHJcbn1cclxuXHJcbmNvbnN0IHN0ID0gbmV3IFNUKCd0YWJsZScpXHJcblxyXG5zdC5pbml0KCkiXX0="}